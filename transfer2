import plotly.express as px
import pandas as pd

# Agrégation
j = base_ml.groupby('YEAR')['ID'].count().reset_index(name='Nombre de transactions')

# Graphique interactif
fig = px.bar(
    j,
    x='YEAR',
    y='Nombre de transactions',
    text='Nombre de transactions',
    title="Évolution annuelle du nombre de transactions",
    color_discrete_sequence=['#1f77b4']
)

# Mise en forme
fig.update_traces(textposition='outside')
fig.update_layout(
    xaxis_title="Année",
    yaxis_title="Nombre de transactions",
    title_x=0.5,
    plot_bgcolor="white",
    xaxis=dict(showgrid=False),
    yaxis=dict(gridcolor="#e0e0e0"),
    bargap=0.2
)

fig.show()
