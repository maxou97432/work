
r = base_ml[base_ml['TYPE_BIEN'] == 'APT'].groupby('YEAR')['ID'].count().sort_values(ascending=False)
l = base_ml[base_ml['TYPE_BIEN'] == 'MAI'].groupby('YEAR')['ID'].count().sort_values(ascending=False)

print("Répartition du nombre de transactions d'appartements sur 10 ans :")
print(r)
print("\nRépartition du nombre de transactions de maisons sur 10 ans :")
print(l)


df_grouped = base_ml.groupby(['YEAR', 'TYPE_BIEN'])['ID'].count().reset_index(name='Nombre_transactions')


total_per_year = df_grouped.groupby('YEAR')['Nombre_transactions'].sum()


pivot_df = df_grouped.pivot(index='YEAR', columns='TYPE_BIEN', values='Nombre_transactions')


pourcentage_df = pivot_df.div(total_per_year, axis=0) * 100


pourcentage_df.plot(kind='bar', stacked=False)
plt.title("Évolution annuelle du pourcentage de transactions par type de bien")
plt.xlabel("Année")
plt.ylabel("Pourcentage de transactions")
plt.legend(title="Type de bien")
plt.tight_layout()
plt.show()

